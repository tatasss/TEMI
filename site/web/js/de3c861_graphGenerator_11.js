;let Graph=function(){};Graph.prototype.graphique=function(e,t,a,l,n,r){document.getElementById('graph-container').innerHTML=`<div;class='row'><div;class='col-sm-10'><canvas;id='${idGraph}'></canvas></div><div;class='col-sm-2'><div;id='js-legend';class='chart-legend'></div> </div></div><div id="${idText}"></div>`;let dataset=[];let colorDif;let color;let targetCanvas=document.getElementById(t);let ctx=targetCanvas.getContext('2d');let myChart;if(e.length!==0){if(e[0].length===0){ctx.clearRect(0,0,targetCanvas.width,targetCanvas.height);myChart=new Chart(ctx,null);myChart.clear();$(t).remove();$('iframe.chartjs-hidden-iframe').remove();document.getElementById(a).innerHTML=' '}
else{colorDif=createColorSet(e[0].length);color=[];colorDif.forEach(function(e){color.push(getColorString(e))});let pays=[];let donneDataset=[];e.forEach(function(e,t){pays.push(e);donneDataset.push([]);pays[t].forEach(function(e){donneDataset[t].push(e.modele.mesdon().tauxeffMoyCourent())})});let entreprise=[];donneDataset[0].forEach(function(e,t){entreprise.push([]);donneDataset.forEach(function(e){entreprise[t].push(e[t])})});let realColor;let entre=[];entreprise.forEach(function(t,a){realColor=[];t.forEach(function(){realColor.push(color[a])});entre.push('entreprise '+(a+1));dataset.push({label:'entreprise '+(a+1)+' taux de marge avant impot = '+e[0][a].donne.margin()+' % ',data:t,backgroundColor:realColor,})});let payTab=[];e.forEach(function(e){payTab.push(e[0].donne.land().name())});let myChart=new Chart(ctx,{type:'bar',data:{labels:payTab,datasets:dataset,},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,stepValue:0.1,},scaleLabel:{display:!0,labelString:'pourcentage %'}}],xAxes:[{display:!0,ticks:{autoSkip:!1,}}]},legend:{display:!1,position:'right',fullWidth:!1,},title:{display:!0,text:'TEMI Global avec le r√©gime fiscal :'+l},responsive:!0,}});let legendsHTML='<ul class=\'1-legend\'>';let getLEgend=myChart.legend.legendItems;getLEgend.forEach(function(e,t){legendsHTML+=`<li><span;style='background-color: ${item.fillStyle}'></span> entreprise ${index + 1} </li>`});legendsHTML+='</ul>';document.getElementById('js-legend').innerHTML=legendsHTML;$('#js-legend > ul > li').on(`click`,function(){let index=$(this).index();$(this).toggleClass('strike');let ci=myChart;let curr=ci.data.datasets[index];curr.hidden=!curr.hidden;ci.update()});document.getElementById(a).innerHTML=this.tableau(entreprise,n,r)}}
else{ctx.clearRect(0,0,targetCanvas.width,targetCanvas.height);myChart=new Chart(ctx,null);myChart.clear();$(t).remove();$('iframe.chartjs-hidden-iframe').remove();document.getElementById(a).innerHTML=' '}};Graph.prototype.tableau=function(e,t,a){let entrer=[];e.forEach(function(e,t){entrer.push('entreprise '+(t+1))});return bootstrap.bootstrapTemiTabSpe(entrer,paysChoisi,e,t,a)};function createColorSet(e){let colors=[],step=3*256/(e+1),cs=0,g;let b;for(let i=0;i<e;i++){cs=i*step;colors[i]=[];colors[i].r=Math.round(cs%256);colors[i].g=Math.round(cs/3);b=256-cs;while(b<0)b=b+256;colors[i].b=Math.round(b)};return colors};function getColorString(e){return'rgba('+e.r+','+e.g+','+e.b+', 1)'};let graph=new Graph();